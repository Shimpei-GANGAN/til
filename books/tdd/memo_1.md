# 第一部

## sec 1
5 steps

1. まずはテストを１つ書く
2. 全てのテストを走らせ、新しいテストの失敗を確認する
3. 小さな変更を行う
4. 全てのテストを走らせ、全て成功することを確認する
5. リファクタリングを行って重複を削除する

TODOリスト

- [ ] \$5 + 10CHF = \$10(レートが2:1の場合)
- [ ] \$5 * 2 = \$10

どのような**テスト**から始めたら良いか？？

テストを書くときに想像するのは、用途にあった完璧なインタフェース

TODOリスト

- [ ] \$5 + 10CHF = \$10(レートが2:1の場合)
- [ ] \$5 * 2 = \$10
- [ ] amountをprivateにする
- [ ] Dollarの副作用どうする？
- [ ] Moneyの丸め処理どうする？


## sec 2
一般的なTDDのサイクルは次のようになる

1. テストを書く。欲しいと思うインタフェースを創作する。
2. 動かす。テストが全て通り、バーがグリーンになる状態へと素早く到達する。きれいでシンプルな解が見えているなら、その通りに書く。もし実現に少し時間がかかりそうな場合は、いったんTODOリストに書いておき、目の前のバーを速やかにグリーンにする作業に戻る。素早いグリーンは全ての罪を赦す。
3. 正しくする。システムは動く状態まできたが、いろいろと汚い手を使ってしまった。悔い改め、ソフトウェの王道を通り、書いてしまった重複を除去して、グリーンバーに素早く戻る。

目指すのは、動作するきれいなコードだ。


## sec 3
オブジェクトを値として使いたいとき、それはValue Objectパターンと呼ばれる。Value Objectには、コンストラクタで設定したインスタンス変数の値が変わってはならないという制約がある。

Value Objectを使う大きなメリットは、別名参照（aliasing）を気にする必要がなくなることだ。５ドルオブジェクトがあるならば、それは常に、永遠に５ドルのままを表す。７ドルを必要とするならば、新しいオブジェクトをつくならければならない。

そのために、操作は全て新しいオブジェクトを返すようにする


